
@{
    Layout = "~/Areas/AppPage/Views/Shared/_Layout.cshtml";
}

<!--Bootstrap Table [ OPTIONAL ]-->
<link href="~/Assets/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
<style>
    .ocultus{
        display:none;
    }

</style>
<!--Page content-->
<!--===================================================-->
<div id="page-content">


    <div class="row">
        <div class="col-lg-12">


            <div class="tab-base">

                <!--Nav Tabs-->
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a data-toggle="tab" href="#demo-lft-tab-1" aria-expanded="true" id="tab_" class="tab-principal">Nueva Gestión Empresa</a>
                    </li>
                </ul>

                <!--Tabs Content-->
                <div class="tab-content">


                    <div id="demo-lft-tab-1" class="tab-pane fade active in">
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-lg-12">
                                    <form name="form-ingreso" action="#" method="post">
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Tipo Gestión</label>
                                                    <select class="form-control" id="TipoGestion">
                                                        <option value="">Seleccione</option>
                                                        <option value="1">Prospección</option>
                                                        <option value="2">Retención</option>
                                                        <option value="3">Fidelización</option> 
                                                    </select>
                                                </div>
                                            </div>
                                         </div>

                                        <div class="row empresa-data">
                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Rut</label>
                                                    <input type="text" class="form-control" id="Rut" readonly="readonly" />
                                                </div>
                                            </div>

                                            <div class="col-sm-5">
                                                <div class="form-group">
                                                    <label class="control-label">Razón Social</label>
                                                    <input type="text" class="form-control inusable" id="RazonSocial" readonly="readonly" />
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label class="control-label">Holding</label>
                                                    <input type="text" class="form-control inusable" id="Holding" readonly="readonly" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row fidelizacion ocultus">
                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Área</label>
                                                    <select class="form-control esarea" id="Fid_Area" name="Fid_Area">
                                                        <option value="">Seleccione</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Ambito de Acción</label>
                                                    <select class="form-control esambito" id="AmbitoAccion" name="AmbitoAccion">
                                                        <option value="">Seleccione</option>
                                                    </select>
                                                </div>
                                            </div>


                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Estamento</label>
                                                    <select class="form-control esestamento" id="Estamento" name="Estamento">
                                                        <option value="">Seleccione</option>
                                                        <option value="1">Empresa</option>
                                                        <option value="2">Sindicato</option>
                                                        <option value="3">Empresa y Sindicato</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Actividad</label>
                                                    <select class="form-control" id="Actividad" name="Actividad">
                                                        <option value="">Seleccione</option>
                                                        <option value="1">Empresa</option>
                                                        <option value="2">Sindicato</option>
                                                        <option value="3">Empresa y Sindicato</option>
                                                    </select>
                                                </div>
                                            </div>

                                        
                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Cobertura</label>
                                                    <input type="text" class="form-control" id="Cobertura" name="Cobertura" />
                                                </div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Nombre Representante Empresa</label>
                                                    <input type="text" class="form-control" id="Nombre" name="Nombre" />
                                                </div>
                                            </div>


                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Cargo</label>
                                                    <input type="text" class="form-control" id="Cargo" name="Cargo" />
                                                </div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Fecha</label>
                                                    <div id="Calendario_Fecha_Fidelizacion">
                                                        <div class="input-group date">
                                                            <input type="text" class="form-control" id="Fecha_Fidelizacion" name="Fecha_Fidelizacion">
                                                            <span class="input-group-addon"><i class="demo-pli-calendar-4"></i></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="row prospectos ocultus">

                                            <div class="col-sm-8 pad-no">
                                                
                                                
                                                <div class="col-sm-2">
                                                    <div class="form-group">
                                                        <label class="control-label">Dotación</label>
                                                        <input type="text" class="form-control" id="Pro_Dotacion" name="Pro_Dotacion" />
                                                    </div>
                                                </div>

                                                <div class="col-sm-3">
                                                    <div class="form-group">
                                                        <label class="control-label">Caja Actual</label>
                                                        <select class="form-control" id="Pro_CajaActual" name="Pro_CajaActual">
                                                            <option value="">Seleccione</option>
                                                            <option value="1">Los Andes</option>
                                                            <option value="2">Los Heroes</option>
                                                            <option value="3">18 de Septiembre</option>
                                                            <option value="4">Gabriela Mistral</option>
                                                            <option value="5">IPS</option>
                                                        </select>
                                                    </div>
                                                </div>


                                                <div class="col-sm-3">
                                                    <div class="form-group">
                                                        <label class="control-label">Fecha</label>
                                                        <div id="Calendario_Fecha_Prospecto">
                                                            <div class="input-group date">
                                                                <input type="text" class="form-control" id="Fecha_Prospecto" name="Fecha_Prospecto">
                                                                <span class="input-group-addon"><i class="demo-pli-calendar-4"></i></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-3">
                                                    <div class="form-group">
                                                        <label class="control-label">Etapa</label>
                                                        <select class="form-control" id="CajaActual" name="CajaActual">
                                                            <option value="">Seleccione</option>
                                                            <option value="1">Prospección</option>
                                                            <option value="2">Levantamiento de Datos</option>
                                                            <option value="3">Proceso de Difusión</option>
                                                            <option value="4">Proceso de Votación</option>
                                                            <option value="5">Afiliación y Reunión de Cierre</option>
                                                            <option value="6">Cierre Proceso</option>
                                                        </select>
                                                    </div>
                                                </div>


                                            </div>

                                            <div class="col-sm-4">
                                                <div class="bord-all">
                                                    <h4 class="text-center">Historial de Gestión</h4>
                                                    <table class="table table-hover table-vcenter">
                                                        <thead>
                                                            <tr>
                                                                <th class="text-center">Fecha Gestión</th>
                                                                <th>Etapa</th>
                                                                <th class="text-center">% Estado de Avance</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td class="text-center">10-10-2017</td>
                                                                <td>
                                                                    <span class="text-main text-semibold">Prospección</span>
                                                                </td>
                                                                <td class="text-center"><span class="text-danger text-semibold">30%</span></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="row retenciones ocultus">

                                            <div class="col-sm-8 pad-no">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label class="control-label">Segmento</label>
                                                            <select class="form-control" id="Ret_Segmento" name="Ret_Segmento">
                                                                <option value="">Seleccione</option>
                                                                <option value="1">Públicos</option>
                                                                <option value="2">Privados</option>
                                                            </select>
                                                        </div>
                                                    </div>
    

                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label class="control-label">Dotación</label>
                                                            <input type="text" class="form-control" id="Ret_Dotacion" name="Ret_Dotacion" />
                                                        </div>
                                                    </div>
    

                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label class="control-label">Caja Destino</label>
                                                            <select class="form-control" id="Ret_CajaDestino" name="Ret_CajaDestino">
                                                                <option value="">Seleccione</option>
                                                                <option value="1">Los Andes</option>
                                                                <option value="2">Los Heroes</option>
                                                                <option value="3">18 de Septiembre</option>
                                                                <option value="4">Gabriela Mistral</option>
                                                                <option value="5">IPS</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                               

                                                <div class="col-sm-4">
                                                    <div class="form-group">
                                                        <label class="control-label">Área</label>
                                                        <select class="form-control esarea" id="Ret_Area" name="Ret_Area">
                                                            <option value="">Seleccione</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="col-sm-4">
                                                    <div class="form-group">
                                                        <label class="control-label">Ambito de Acción</label>
                                                        <select class="form-control esambito" id="Ret_AmbitoAccion" name="Ret_AmbitoAccion">
                                                            <option value="">Seleccione</option>
                                                        </select>
                                                    </div>
                                                </div>


                                                <div class="col-sm-4">
                                                    <div class="form-group">
                                                        <label class="control-label">Estamento</label>
                                                        <select class="form-control esestamento" id="Ret_Estamento" name="Ret_Estamento">
                                                            <option value="">Seleccione</option>
                                                            <option value="1">Empresa</option>
                                                            <option value="2">Sindicato</option>
                                                            <option value="3">Empresa y Sindicato</option>
                                                        </select>
                                                    </div>
                                                </div>

                                               
                                                <div class="col-sm-offset-4 col-sm-4">
                                                    <div class="form-group">
                                                        <label class="control-label">Fecha</label>
                                                        <div id="Calendario_Fecha_Retencion">
                                                            <div class="input-group date">
                                                                <input type="text" class="form-control" id="Fecha_Prospecto" name="Fecha_Retencion">
                                                                <span class="input-group-addon"><i class="demo-pli-calendar-4"></i></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-4">
                                                    <div class="form-group">
                                                        <label class="control-label">Etapa</label>
                                                        <select class="form-control" id="CajaActual" name="CajaActual">
                                                            <option value="">Seleccione</option>
                                                            <option value="1">Estudio Cajas</option>
                                                            <option value="2">Acciones de Retención</option>
                                                            <option value="3">Propuestas de Cajas</option>
                                                            <option value="4">Proceso de Votación</option>
                                                            <option value="5">Desafiliación</option>
                                                            <option value="6">Se Logra Retención</option>

                                                        </select>
                                                    </div>
                                                </div>


                                                <div class="col-sm-12">
                                                    <div class="form-group">
                                                        <label class="control-label">Observaciones</label>
                                                        <textarea class="form-control" ></textarea>
                                                    </div>
                                                </div>

                                             </div>

                                            <div class="col-sm-4">
                                                <div class="bord-all">
                                                    <h4 class="text-center">Historial de Gestión</h4>
                                                    <table class="table table-hover table-vcenter">
                                                        <thead>
                                                            <tr>
                                                                <th class="text-center">Fecha Gestión</th>
                                                                <th>Etapa</th>
                                                                <th class="text-center">% Estado de Avance</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td class="text-center">10-05-2017</td>
                                                                <td>
                                                                    <span class="text-main text-semibold">Estudio Cajas</span>
                                                                </td>
                                                                <td class="text-center"><span class="text-success text-semibold">30%</span></td>
                                                            </tr>

                                                            <tr>
                                                                <td class="text-center">25-06-2017</td>
                                                                <td>
                                                                    <span class="text-main text-semibold">Acciones Retencion</span>
                                                                </td>
                                                                <td class="text-center"><span class="text-warning text-semibold">50%</span></td>
                                                            </tr>
                                                            <tr>
                                                                <td class="text-center">10-10-2017</td>
                                                                <td>
                                                                    <span class="text-main text-semibold">Propuestas de Cajas</span>
                                                                </td>
                                                                <td class="text-center"><span class="text-warning text-semibold">70%</span></td>
                                                            </tr>
                                                            <tr>
                                                                <td class="text-center">10-10-2017</td>
                                                                <td>
                                                                    <span class="text-main text-semibold">Proceso de Votación</span>
                                                                </td>
                                                                <td class="text-center"><span class="text-danger text-semibold">90%</span></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>

                                        </div>


                                        <div class="row acciones">
                                            <a class="btn btn-primary" href="/motor/App/Empresas/">Volver</a>
                                            <button class="btn btn-success" disabled="disabled">Guardar</button>
                                        </div>

                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



    </div>



</div>
<!--===================================================-->
<!--End page content-->

@section script{

   <script>
       $(function () {
        


           $("#TipoGestion").on("change", function () {
                
               if($(this).val() == 3)
               {
                   $(".fidelizacion").show("slow");
                   $(".prospectos").hide("slow");
                   $(".retenciones").hide("slow");
                   $("#Rut").prop({ "readonly": false })
                   $(".inusable").prop({ "readonly": true })
               }
               else if ($(this).val() == 2)
               {
                   $(".fidelizacion").hide("slow");
                   $(".prospectos").hide("slow");
                   $(".retenciones").show("slow");
                   $("#Rut").prop({ "readonly": false })
                   $(".inusable").prop({ "readonly": true })
               }
               else if ($(this).val() == 1)
               {
                   $(".fidelizacion").hide("slow");
                   $(".prospectos").show("slow");
                   $(".retenciones").hide("slow");
                   $(".inusable, #Rut").prop({"readonly":false})
               }
               else
               {
                   $(".fidelizacion").hide("slow");
                   $(".prospectos").hide("slow");
                   $(".retenciones").hide("slow");
               }

           });




           $.SecGetJSON(BASE_URL + "/Motor/Assets/data/areas.json", function (respuesta) {
               $.each(respuesta, function (i, e) {
                   $(".esarea").append($("<option>").prop({ "value": e.id }).html(e.nombre))
               });
           });

           $(".esarea").on("change", function () {
               $that = $(this);
               $.SecGetJSON(BASE_URL + "/Motor/Assets/data/ambitos.json", function (respuesta) {
                   $(".esambito").html("<option value=\"\">Seleccione</option>")
                   $.each(respuesta, function (i, e) {
                       if (e.padre == $that.val()) {
                           $(".esambito").append($("<option>").prop({ "value": e.id }).html(e.nombre))
                       }
                   });
               });
           });


           $('#Calendario_Fecha_Fidelizacion .input-group.date').datepicker(
                { autoclose: true, format: 'dd-mm-yyyy', startDate: "0d", language: "es", daysOfWeekDisabled: [6, 0], todayHighlight: true }
            ).on('changeDate', function (e) {
                //$('#datos-gestion').bootstrapValidator('updateStatus', 'ges_prox_gestion', 'NOT_VALIDATED').bootstrapValidator('validateField', 'ges_prox_gestion');

                console.log(e)

            });


           $('#Calendario_Fecha_Prospecto .input-group.date').datepicker(
                { autoclose: true, format: 'dd-mm-yyyy', startDate: "0d", language: "es", daysOfWeekDisabled: [6, 0], todayHighlight: true }
            ).on('changeDate', function (e) {
                //$('#datos-gestion').bootstrapValidator('updateStatus', 'ges_prox_gestion', 'NOT_VALIDATED').bootstrapValidator('validateField', 'ges_prox_gestion');

                console.log(e)

            });

           $('#Calendario_Fecha_Retencion .input-group.date').datepicker(
                { autoclose: true, format: 'dd-mm-yyyy', startDate: "0d", language: "es", daysOfWeekDisabled: [6, 0], todayHighlight: true }
            ).on('changeDate', function (e) {
                //$('#datos-gestion').bootstrapValidator('updateStatus', 'ges_prox_gestion', 'NOT_VALIDATED').bootstrapValidator('validateField', 'ges_prox_gestion');

                console.log(e)

            });

           

       });
   </script>
   



}

